<Window x:Class="Kanstraction.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Kanstraction"
        Height="720" Width="1280"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource MaterialDesignPaper}">
    <Grid Margin="16">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260"/>
            <ColumnDefinition Width="12"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Projects explorer -->
        <Border Grid.Column="0"
                Padding="12"
                Background="{DynamicResource MaterialDesignCardBackground}"
                BorderBrush="{DynamicResource MaterialDesignDivider}"
                BorderThickness="1"
                CornerRadius="8">
            <DockPanel>
                <StackPanel DockPanel.Dock="Top" Margin="0,0,0,12">
                    <TextBlock Text="Projets" FontSize="18" FontWeight="SemiBold"/>
                    <Button Content="Actualiser"
                            Margin="0,12,0,0"
                            Command="{Binding RefreshCommand}"
                            Style="{StaticResource MaterialDesignOutlinedButton}"/>
                </StackPanel>
                <ListBox ItemsSource="{Binding Projects}"
                         SelectedItem="{Binding SelectedProject, Mode=TwoWay}"
                         DisplayMemberPath="Name"
                         Style="{StaticResource MaterialDesignListBox}"
                         BorderThickness="0"/>
            </DockPanel>
        </Border>

        <GridSplitter Grid.Column="1"
                      Width="12"
                      HorizontalAlignment="Stretch"
                      Background="{DynamicResource MaterialDesignDivider}"/>

        <!-- Details -->
        <Grid Grid.Column="2" Margin="0,0,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="12"/>
                <RowDefinition Height="2*"/>
                <RowDefinition Height="12"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="12"/>
                <RowDefinition Height="2*"/>
            </Grid.RowDefinitions>

            <TextBlock Text="Bâtiments" FontSize="18" FontWeight="SemiBold" Grid.Row="0" Margin="0,0,0,8"/>
            <DataGrid Grid.Row="1"
                      ItemsSource="{Binding Buildings}"
                      SelectedItem="{Binding SelectedBuilding, Mode=TwoWay}"
                      AutoGenerateColumns="False"
                      HeadersVisibility="Column"
                      CanUserAddRows="False"
                      CanUserDeleteRows="False"
                      IsReadOnly="True"
                      BorderThickness="0"
                      Style="{StaticResource MaterialDesignDataGrid}">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Code" Binding="{Binding Code}" Width="*"/>
                    <DataGridTextColumn Header="Type" Binding="{Binding TypeName}" Width="2*"/>
                    <DataGridTextColumn Header="Statut" Binding="{Binding Status}" Width="*"/>
                    <DataGridTextColumn Header="Progression" Binding="{Binding ProgressDisplay}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>

            <TextBlock Text="Étapes" FontSize="18" FontWeight="SemiBold" Grid.Row="3" Margin="0,0,0,8"/>
            <DataGrid Grid.Row="3" Margin="0,32,0,0"
                      ItemsSource="{Binding Stages}"
                      SelectedItem="{Binding SelectedStage, Mode=TwoWay}"
                      AutoGenerateColumns="False"
                      HeadersVisibility="Column"
                      CanUserAddRows="False"
                      CanUserDeleteRows="False"
                      IsReadOnly="True"
                      BorderThickness="0"
                      Style="{StaticResource MaterialDesignDataGrid}">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Nom" Binding="{Binding Name}" Width="2*"/>
                    <DataGridTextColumn Header="Statut" Binding="{Binding Status}" Width="*"/>
                    <DataGridTextColumn Header="Progression" Binding="{Binding ProgressDisplay}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>

            <TextBlock Text="Sous-étapes" FontSize="18" FontWeight="SemiBold" Grid.Row="5" Margin="0,0,0,8"/>
            <DataGrid Grid.Row="5" Margin="0,32,0,0"
                      ItemsSource="{Binding SubStages}"
                      SelectedItem="{Binding SelectedSubStage, Mode=TwoWay}"
                      AutoGenerateColumns="False"
                      HeadersVisibility="Column"
                      CanUserAddRows="False"
                      CanUserDeleteRows="False"
                      IsReadOnly="True"
                      BorderThickness="0"
                      Style="{StaticResource MaterialDesignDataGrid}">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Nom" Binding="{Binding Name}" Width="2*"/>
                    <DataGridTextColumn Header="Statut" Binding="{Binding Status}" Width="*"/>
                    <DataGridTextColumn Header="Main-d'œuvre" Binding="{Binding LaborCost, StringFormat=N2}" Width="*"/>
                    <DataGridTextColumn Header="Début" Binding="{Binding StartDate, StringFormat=d}" Width="*"/>
                    <DataGridTextColumn Header="Fin" Binding="{Binding EndDate, StringFormat=d}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>

            <TextBlock Text="Matériaux" FontSize="18" FontWeight="SemiBold" Grid.Row="7" Margin="0,0,0,8"/>
            <DataGrid Grid.Row="7" Margin="0,32,0,0"
                      ItemsSource="{Binding Materials}"
                      AutoGenerateColumns="False"
                      HeadersVisibility="Column"
                      CanUserAddRows="False"
                      CanUserDeleteRows="False"
                      IsReadOnly="True"
                      BorderThickness="0"
                      Style="{StaticResource MaterialDesignDataGrid}">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Matériau" Binding="{Binding MaterialName}" Width="2*"/>
                    <DataGridTextColumn Header="Quantité" Binding="{Binding Quantity}" Width="*"/>
                    <DataGridTextColumn Header="Unité" Binding="{Binding Unit}" Width="*"/>
                    <DataGridTextColumn Header="PU" Binding="{Binding UnitPrice, StringFormat=N2}" Width="*"/>
                    <DataGridTextColumn Header="Total" Binding="{Binding TotalCost, StringFormat=N2}" Width="*"/>
                    <DataGridTextColumn Header="Date" Binding="{Binding UsageDate, StringFormat=d}" Width="*"/>
                    <DataGridTextColumn Header="Notes" Binding="{Binding Notes}" Width="2*"/>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>
    </Grid>
</Window>
